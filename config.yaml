complete_set:
  enabled: true
  dry_run: true
  refresh_millis: 500
  assets: [bitcoin]

    # Bankroll
  bankroll_usd: 500

  # Edge
  min_edge: 0.01
  hedge_edge_buffer: 0.0          # extra edge required above min_edge before hedging (was 0.005)


    # Hedge chase protection — max cents of upward reprice allowed (0 = freeze)
  max_hedge_chase_cents: 0


  # Time window
  min_seconds_to_end: 90
  max_seconds_to_end: 900
  no_new_orders_sec: 90

  # Swing filter — require opposite side was recently cheap before first leg
  swing_filter_enabled: true
  swing_lookback_sec: 180         # 3 minutes of price history
  swing_max_ask: 0.48             # opposite side must have been below this

  # Merge
  min_merge_shares: 10
  min_merge_profit_usd: 0.02
  merge_cooldown_sec: 15
  post_merge_lockout: true        # block new entries on a market after merge

  # Gas
  max_gas_price_gwei: 200
  dry_merge_gas_cost_usd: 0.003

  # Stop hunt — unified entry signal (minutes 2-12 of candle)
  stop_hunt_enabled: true
  sh_entry_start_sec: 780
  sh_entry_end_sec: 90            # was 600, now covers full window (matches no_new_orders_sec)

  # Mean reversion — disabled (MR falls through to cheapest-ask, same as SH)
  mean_reversion_enabled: false
  mr_deviation_threshold: 0.0010
  mr_range_filter_enabled: false
  mr_max_range_pct: 0.0050
  mr_entry_window_sec: 600

  # Volume imbalance — disabled (never influenced direction, threshold too high)
  volume_imbalance_enabled: false
  volume_imbalance_threshold: 0.15
  volume_min_btc: 50
  volume_short_window_sec: 30
  volume_medium_window_sec: 120

  # Entry price bounds — reject first-leg entries outside this range
  max_entry_price: 0.45
  min_entry_price: 0.10

  # BTC tick count — minimum WS ticks before allowing entry (5 ticks ≈ 16s of price history)
  min_btc_ticks: 5

  # Entry guard — floor for hedge-margin check (decoupled from min_edge)
  min_entry_margin: 0.02

  # Min BTC range — block entries when BTC candle range is too flat for swing opportunities
  min_range_pct: 0.002              # 0.2% minimum BTC range before entry

  # BTC momentum filter — block entries during one-directional BTC moves
  momentum_filter_enabled: true
  momentum_lookback_sec: 30
  momentum_threshold_usd: 100

  # Abandon — stop evaluating positions where hedge edge is deeply negative
  abandon_edge_threshold: -0.10
  abandon_sell_enabled: true           # place GTC SELL at bid when abandoning
  abandon_min_bid: 0.03               # don't sell at dust bids

  # Log filters — suppress noisy DEBUG patterns (true = shown, false = hidden)
  log_filters:
    hedge_skip: true
    book_change: false
    lag_trace: false
    btc_tick: true
    buffer_hold: true
